function getPosTop(r,o){return cellSapce+r*(cellSapce+cellSideLength)}function getPosLeft(r,o){return cellSapce+o*(cellSapce+cellSideLength)}function getNumberBackgroundColor(r){switch(r){case 2:return"#eee4da";case 4:return"#ede0c8";case 8:return"#f2b179";case 16:return"#f59563";case 32:return"#f67e5f";case 64:return"#f65e3b";case 128:return"#edcf72";case 256:return"#edcc61";case 512:return"#9c0";case 1024:return"#33b5e5";case 2048:return"#09c";case 4096:return"#a6c";case 8192:return"#93c"}return"black"}function getNumberColor(r){return r<=4?"#776e65":"white"}function nospace(r){for(var o=0;o<4;o++)for(var e=0;e<4;e++)if(0==r[o][e])return!1;return!0}function canMoveLeft(r){for(var o=0;o<4;o++)for(var e=1;e<4;e++)if(0!=r[o][e]&&(0==r[o][e-1]||r[o][e-1]==r[o][e]))return!0;return!1}function canMoveUp(r){for(var o=1;o<4;o++)for(var e=0;e<4;e++)if(0!=r[o][e]&&(0==r[o-1][e]||r[o-1][e]==r[o][e]))return!0;return!1}function canMoveRight(r){for(var o=0;o<4;o++)for(var e=2;e>-1;e--)if(0!=r[o][e]&&(0==r[o][e+1]||r[o][e+1]==r[o][e]))return!0;return!1}function canMoveDown(r){for(var o=2;o>-1;o--)for(var e=0;e<4;e++)if(0!=r[o][e]&&(0==r[o+1][e]||r[o+1][e]==r[o][e]))return!0;return!1}function noBlockHorizontal(r,o,e,a){for(var n=o+1;n<e;n++)if(0!=a[r][n])return!1;return!0}function noBlockVertical(r,o,e,a){for(var n=o+1;n<e;n++)if(0!=a[n][r])return!1;return!0}function nomove(r){return!(canMoveDown(r)||canMoveLeft(r)||canMoveRight(r)||canMoveUp(r))}function isgameover(){nospace(board)&&nomove(board)&&gameover()}function gameover(){alert("Gameover!")}function moveLeft(){if(!canMoveLeft(board))return!1;for(var r=0;r<4;r++)for(var o=1;o<4;o++)if(0!=board[r][o])for(var e=0;e<o;e++){if(0==board[r][e]&&noBlockHorizontal(r,e,o,board)){showMoveAnimation(r,o,r,e),board[r][e]=board[r][o],board[r][o]=0;break}if(board[r][e]==board[r][o]&&noBlockHorizontal(r,e,o,board)&&!hasConflicted[r][e]){showMoveAnimation(r,o,r,e),board[r][e]+=board[r][o],board[r][o]=0,hasConflicted[r][e]=!0,score+=board[r][e],updateScore(score);break}}return setTimeout("updateBoardView()",200),!0}function moveUp(){if(!canMoveUp(board))return!1;for(var r=1;r<4;r++)for(var o=0;o<4;o++)if(0!=board[r][o])for(var e=0;e<r;e++){if(0==board[e][o]&&noBlockVertical(o,e,r,board)){showMoveAnimation(r,o,e,o),board[e][o]=board[r][o],board[r][o]=0;break}if(board[e][o]==board[r][o]&&noBlockVertical(o,e,r,board)&&!hasConflicted[e][o]){showMoveAnimation(r,o,e,o),board[e][o]+=board[r][o],board[r][o]=0,hasConflicted[e][o]=!0,score+=board[e][o],updateScore(score);break}}return setTimeout("updateBoardView()",200),!0}function moveRight(){if(!canMoveRight(board))return!1;for(var r=0;r<4;r++)for(var o=2;o>-1;o--)if(0!=board[r][o])for(var e=3;e>o;e--){if(0==board[r][e]&&noBlockHorizontal(r,o,e,board)){showMoveAnimation(r,o,r,e),board[r][e]=board[r][o],board[r][o]=0;break}if(board[r][e]==board[r][o]&&noBlockHorizontal(r,o,e,board)&&!hasConflicted[r][e]){showMoveAnimation(r,o,r,e),board[r][e]+=board[r][o],board[r][o]=0,hasConflicted[r][e]=!0,score+=board[r][e],updateScore(score);break}}return setTimeout("updateBoardView()",200),!0}function moveDown(){if(!canMoveDown(board))return!1;for(var r=2;r>-1;r--)for(var o=0;o<4;o++)if(0!=board[r][o])for(var e=3;e>r;e--){if(0==board[e][o]&&noBlockVertical(o,r,e,board)){showMoveAnimation(r,o,e,o),board[e][o]=board[r][o],board[r][o]=0;break}if(board[e][o]==board[r][o]&&noBlockVertical(o,r,e,board)&&!hasConflicted[e][o]){showMoveAnimation(r,o,e,o),board[e][o]+=board[r][o],board[r][o]=0,hasConflicted[e][o]=!0,score+=board[e][o],updateScore(score);break}}return setTimeout("updateBoardView()",200),!0}documentWidth=window.screen.availWidth,gridContainerWidth=.92*documentWidth,cellSideLength=.18*documentWidth,cellSapce=.04*documentWidth;